<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Story Weaver</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --fantasy-gradient: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            --scifi-gradient: linear-gradient(135deg, #2196F3 0%, #9C27B0 100%);
            --mystery-gradient: linear-gradient(135deg, #000428 0%, #004e92 100%);
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --bg-card: rgba(255, 255, 255, 0.95);
            --bg-overlay: rgba(255, 255, 255, 0.1);
            --shadow-soft: 0 8px 32px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Libre Baskerville', serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            color: var(--text-primary);
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        /* Main layout */
        .app-container {
            display: flex;
            height: 100vh;
            position: relative;
            z-index: 2;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--bg-overlay);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .app-title {
            font-family: 'Crimson Text', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .menu-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .menu-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .story-section {
            margin-bottom: 25px;
        }

        .section-title {
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .story-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: var(--shadow-soft);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary-gradient);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .story-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .story-card:hover::before {
            transform: scaleX(1);
        }

        .story-title {
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .story-meta {
            font-family: 'Inter', sans-serif;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .story-preview {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 10px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .story-actions {
            display: flex;
            gap: 8px;
        }

        .btn-small {
            padding: 4px 12px;
            border: none;
            border-radius: 6px;
            font-size: 0.75rem;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--text-secondary);
        }

        .btn-small:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .new-story-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 10px;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-soft);
        }

        .new-story-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        /* Main content area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-overlay);
            backdrop-filter: blur(20px);
        }

        .header {
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .current-framework {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }

        .framework-title {
            font-family: 'Crimson Text', serif;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .framework-badge {
            padding: 4px 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-family: 'Inter', sans-serif;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .genre-selector {
            display: flex;
            gap: 12px;
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .genre-pill {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 25px;
            color: white;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .genre-pill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .genre-pill:hover::before {
            left: 100%;
        }

        .genre-pill.active {
            background: var(--fantasy-gradient);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        .genre-pill.scifi.active {
            background: var(--scifi-gradient);
        }

        .genre-pill.mystery.active {
            background: var(--mystery-gradient);
        }

        /* Chat area */
        .chat-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            max-width: 80%;
            padding: 16px 20px;
            border-radius: 18px;
            position: relative;
            animation: messageSlide 0.3s ease-out;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.system {
            align-self: flex-start;
            background: var(--bg-card);
            border: 1px solid rgba(102, 126, 234, 0.2);
            box-shadow: var(--shadow-soft);
        }

        .message.user {
            align-self: flex-end;
            background: var(--primary-gradient);
            color: white;
        }

        .message-header {
            font-family: 'Inter', sans-serif;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 8px;
            opacity: 0.8;
        }

        .message-content {
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Input area */
        .input-area {
            padding: 25px 30px;
            background: rgba(255, 255, 255, 0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .input-container {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .message-input {
            width: 100%;
            min-height: 50px;
            max-height: 150px;
            padding: 15px 50px 15px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.9);
            font-family: 'Libre Baskerville', serif;
            font-size: 0.95rem;
            resize: none;
            outline: none;
            transition: all 0.3s ease;
        }

        .message-input:focus {
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .input-actions {
            position: absolute;
            right: 10px;
            bottom: 10px;
            display: flex;
            gap: 5px;
        }

        .action-btn {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            background: var(--primary-gradient);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .action-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .sidebar {
                position: absolute;
                z-index: 10;
                height: 100%;
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .app-container {
                flex-direction: column;
            }

            .chat-area {
                padding: 20px;
            }

            .message {
                max-width: 90%;
            }

            .genre-selector {
                flex-wrap: wrap;
                padding: 15px 20px;
            }
        }

        /* Loading animation */
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 15px 20px;
            align-self: flex-start;
            background: var(--bg-card);
            border-radius: 18px;
            box-shadow: var(--shadow-soft);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-secondary);
            animation: typingPulse 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingPulse {
            0%, 60%, 100% { opacity: 0.3; transform: scale(1); }
            30% { opacity: 1; transform: scale(1.2); }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="app-title">üìö Story Weaver</h1>
                <button class="menu-toggle" id="menuToggle">‚â°</button>
            </div>

            <div class="story-section">
                <div class="section-title">üî• Active Stories</div>
                <div class="story-card">
                    <div class="story-title">üêâ The Dragon's Lair</div>
                    <div class="story-meta">Framework: Hero's Journey ‚Ä¢ Fantasy</div>
                    <div class="story-preview">"You stand before the ancient cave, your sword gleaming in the moonlight..."</div>
                    <div class="story-actions">
                        <button class="btn-small btn-primary">Continue</button>
                        <button class="btn-small btn-secondary">Archive</button>
                    </div>
                </div>
                
                <div class="story-card">
                    <div class="story-title">üöÄ Space Station Omega</div>
                    <div class="story-meta">Framework: Three-Act Structure ‚Ä¢ Sci-Fi</div>
                    <div class="story-preview">"The airlock hisses open, revealing the vast darkness of space..."</div>
                    <div class="story-actions">
                        <button class="btn-small btn-primary">Continue</button>
                        <button class="btn-small btn-secondary">Archive</button>
                    </div>
                </div>
            </div>

            <div class="story-section">
                <div class="section-title">üìã Recent Stories</div>
                <div class="story-card">
                    <div class="story-title">üïµÔ∏è The Missing Heiress</div>
                    <div class="story-meta">Framework: Mystery Structure ‚Ä¢ Mystery</div>
                    <div class="story-preview">"The butler's story doesn't add up..."</div>
                    <div class="story-actions">
                        <button class="btn-small btn-primary">Continue</button>
                        <button class="btn-small btn-secondary">Archive</button>
                    </div>
                </div>
            </div>

            <div class="story-section">
                <div class="section-title">üìÅ Archived</div>
                <div class="story-card">
                    <div class="story-title">2024 Adventures</div>
                    <div class="story-meta">15 completed stories</div>
                    <div class="story-actions">
                        <button class="btn-small btn-secondary">Browse</button>
                    </div>
                </div>
            </div>

            <button class="new-story-btn">+ New Story</button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <div class="current-framework">
                    <span class="framework-title">Hero's Journey</span>
                    <span class="framework-badge">Classic</span>
                </div>
                <button class="menu-toggle" id="mobileMenuToggle">‚â°</button>
            </div>

            <div class="genre-selector">
                <div class="genre-pill active fantasy">
                    <span>üó°Ô∏è</span>
                    <span>Fantasy</span>
                </div>
                <div class="genre-pill scifi">
                    <span>üöÄ</span>
                    <span>Sci-Fi</span>
                </div>
                <div class="genre-pill mystery">
                    <span>üïµÔ∏è</span>
                    <span>Mystery</span>
                </div>
                <div class="genre-pill">
                    <span>üè∞</span>
                    <span>Historical</span>
                </div>
                <div class="genre-pill">
                    <span>üíï</span>
                    <span>Romance</span>
                </div>
            </div>

            <div class="chat-area" id="chatArea">
                <div class="message system">
                    <div class="message-header">üé≠ Story Narrator</div>
                    <div class="message-content">
                        Welcome, brave adventurer! You stand at the threshold of an endless realm of possibilities. 
                        
                        The ancient forest stretches before you, its canopy so thick that only scattered beams of golden sunlight pierce through to illuminate the moss-covered ground. You grip your enchanted sword, feeling its familiar weight in your hand as mystical energy pulses through the blade.
                        
                        In the distance, you hear the faint sound of rushing water‚Äîperhaps a stream that could lead you deeper into this magical realm. To your left, a narrow path winds between towering oak trees, while to your right, strange blue flowers seem to glow with an inner light.
                        
                        What do you choose to do?
                    </div>
                </div>

                <div class="message user">
                    <div class="message-header">üßô You</div>
                    <div class="message-content">
                        I carefully examine the glowing blue flowers to my right, keeping my hand on my sword hilt in case they're magical or dangerous. I want to understand what kind of magic I'm dealing with before venturing deeper into the forest.
                    </div>
                </div>

                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>

            <div class="input-area">
                <div class="input-container">
                    <div class="input-wrapper">
                        <textarea 
                            class="message-input" 
                            id="messageInput"
                            placeholder="Continue the adventure..."
                            rows="1"
                        ></textarea>
                        <div class="input-actions">
                            <button class="action-btn secondary" id="surpriseBtn" title="Surprise me!">üé≤</button>
                            <button class="action-btn" id="sendBtn" title="Send message">üìù</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize particles
        function createParticles() {
            const particles = document.getElementById('particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // Random size and position
                const size = Math.random() * 4 + 1;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                
                particles.appendChild(particle);
            }
        }

        // Auto-resize textarea
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        // Handle genre selection
        function selectGenre(genre) {
            document.querySelectorAll('.genre-pill').forEach(pill => {
                pill.classList.remove('active');
            });
            
            const selectedPill = document.querySelector(`[data-genre="${genre}"]`) || 
                               event.target.closest('.genre-pill');
            selectedPill.classList.add('active');
            
            // Update background based on genre
            const root = document.documentElement;
            switch(genre) {
                case 'fantasy':
                    root.style.setProperty('--primary-gradient', 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)');
                    break;
                case 'scifi':
                    root.style.setProperty('--primary-gradient', 'linear-gradient(135deg, #2196F3 0%, #9C27B0 100%)');
                    break;
                case 'mystery':
                    root.style.setProperty('--primary-gradient', 'linear-gradient(135deg, #000428 0%, #004e92 100%)');
                    break;
                default:
                    root.style.setProperty('--primary-gradient', 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)');
            }
        }

        // Send message function
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addMessage(message, 'user');
            
            // Clear input
            input.value = '';
            autoResize(input);
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate API response (replace with actual API call)
            setTimeout(() => {
                hideTypingIndicator();
                const responses = [
                    "As you approach the mysterious blue flowers, they begin to pulse with a brighter light. You notice that the glow emanates from tiny crystalline structures within the petals. When you extend your hand toward them, the flowers seem to lean in your direction, as if drawn to your magical sword...",
                    "The moment you step closer to the glowing flowers, a gentle harmonic hum fills the air. The blue light dances across your sword's blade, and you realize these are Lumina Blossoms‚Äîrare magical flowers that react to enchanted items. Local legends say they can reveal hidden paths...",
                    "Your cautious approach proves wise. As you kneel beside the flowers, their blue glow intensifies, and you see tiny motes of light beginning to float upward from their centers. These appear to be Starfall Blooms, flowers that are said to bloom only where powerful magic has touched the earth..."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addMessage(randomResponse, 'system');
            }, 2000);
        }

        // Add message to chat
        function addMessage(content, type) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', type);
            
            const header = type === 'system' ? 'üé≠ Story Narrator' : 'üßô You';
            messageDiv.innerHTML = `
                <div class="message-header">${header}</div>
                <div class="message-content">${content}</div>
            `;
            
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        // Show/hide typing indicator
        function showTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            const chatArea = document.getElementById('chatArea');
            indicator.style.display = 'flex';
            chatArea.appendChild(indicator);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            indicator.style.display = 'none';
        }

        // Surprise me function
        function generateSurprise() {
            const surprises = [
                "I decide to cast a detection spell to sense any magical auras in the area.",
                "I search my pack for a piece of bread to toss near the flowers and see how they react.",
                "I close my eyes and try to listen for any whispers or voices that might be carried on the magical energy.",
                "I draw my sword halfway and observe if the blade's glow changes in response to the flowers.",
                "I look around for any stone or small object to gently toss near the flowers to test their reaction."
            ];
            
            const input = document.getElementById('messageInput');
            input.value = surprises[Math.floor(Math.random() * surprises.length)];
            autoResize(input);
        }

        // Toggle sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');
            sidebar.classList.toggle('open');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            
            const messageInput = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            const surpriseBtn = document.getElementById('surpriseBtn');
            const menuToggle = document.getElementById('menuToggle');
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            
            // Auto-resize textarea
            messageInput.addEventListener('input', () => autoResize(messageInput));
            
            // Send message on button click
            sendBtn.addEventListener('click', sendMessage);
            
            // Send message on Enter (but allow Shift+Enter for new lines)
            messageInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Surprise button
            surpriseBtn.addEventListener('click', generateSurprise);
            
            // Menu toggles
            menuToggle.addEventListener('click', toggleSidebar);
            mobileMenuToggle.addEventListener('click', toggleSidebar);
            
            // Genre selection
            document.querySelectorAll('.genre-pill').forEach(pill => {
                pill.addEventListener('click', function() {
                    const genreClasses = ['fantasy', 'scifi', 'mystery'];
                    const genre = genreClasses.find(cls => this.classList.contains(cls)) || 'default';
                    selectGenre(genre);
                });
            });
            
            // Story card interactions
            document.querySelectorAll('.story-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('btn-small')) {
                        // Handle story selection
                        console.log('Story selected:', this.querySelector('.story-title').textContent);
                    }
                });
            });
        });
    </script>
</body>
</html>